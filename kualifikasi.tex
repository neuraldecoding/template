% Template LaTeX untuk Ujian Kualifikasi
% Program Studi Doktor Informatika
% Universitas Telkom

% Document Class
\documentclass[12pt,a4paper]{article}

% Packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{times}
\usepackage{amsmath}
\usepackage[english,indonesian]{babel}
\usepackage{geometry}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{array}
\usepackage{caption}
\usepackage{enumitem}
\usepackage{parskip}
\usepackage{fancyhdr}
\usepackage{tocloft}
\usepackage{tabularx}
\usepackage{ragged2e}  % For better text justification in bibliography

% Page Setup
\geometry{
    top=3cm,
    bottom=3cm,
    left=4cm,
    right=3cm
}

% Title Formatting
\titleformat{\section}
    {\normalfont\fontsize{16}{19}\bfseries\centering}{\thesection}{1em}{}
    
\titleformat{\subsection}
    {\normalfont\fontsize{12}{14}\bfseries}{\thesubsection}{1em}{}

\titleformat{\subsubsection}
    {\normalfont\fontsize{12}{14}\normalfont}{\thesubsubsection}{1em}{}

% Spacing
\onehalfspacing

% Header/Footer
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0pt}

% Hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=black,
    urlcolor=black,
}

% Table of Contents customization
\renewcommand{\contentsname}{DAFTAR ISI}
\renewcommand{\cfttoctitlefont}{\hfill\fontsize{16}{19}\selectfont\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill}

% List of Tables customization
\renewcommand{\listtablename}{DAFTAR TABEL}
\renewcommand{\cftlottitlefont}{\hfill\fontsize{16}{19}\selectfont\bfseries}
\renewcommand{\cftafterlottitle}{\hfill}

% List of Figures customization
\renewcommand{\listfigurename}{DAFTAR GAMBAR}
\renewcommand{\cftloftitlefont}{\hfill\fontsize{16}{19}\selectfont\bfseries}
\renewcommand{\cftafterloftitle}{\hfill}

% List of Equations setup
\newcommand{\listequationsname}{DAFTAR RUMUS}
\newlistof{myequations}{equ}{\listequationsname}
\newcommand{\myequations}[1]{%
\addcontentsline{equ}{myequations}{\protect\numberline{\theequation}#1}\par}
\renewcommand{\cftequtitlefont}{\hfill\fontsize{16}{19}\selectfont\bfseries}
\renewcommand{\cftafterequtitle}{\hfill}
\setlength{\cftmyequationsindent}{0pt}

% Redefine \listofequations to use the custom list
\newcommand{\listofequations}{\listofmyequations}

% Subsection numbering format
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}

% Custom Commands
\newcommand{\myTitle}[1]{\def\@myTitle{#1}}
\newcommand{\myName}[1]{\def\@myName{#1}}
\newcommand{\myNIM}[1]{\def\@myNIM{#1}}
\newcommand{\myYear}[1]{\def\@myYear{#1}}

% Redefine title
\makeatletter
% Initialize default values
\def\@myTitle{Judul Disertasi}
\def\@myNIM{NIM}
\def\@myName{Nama Mahasiswa}
\def\@myYear{Tahun}

\renewcommand{\maketitle}{
    \begin{titlepage}
        \centering
        \vspace*{0.5cm}
        
        % Judul Disertasi (bagian atas)
        {\fontsize{16}{20}\selectfont
        \textbf{Judul Disertasi: Dituliskan Singkat dan Spesifik (Tuliskan semua judul disertasi.}\par
        \textbf{Secara umum untuk menjelaskan judul proposal penelitian dapat mengikuti pola:}\par
        \textbf{Metode yang diusulkan -- Tujuan -- Objek area area of interest)}\par}
        
        \vspace{1.5cm}
        
        % Tahap Ujian Kualifikasi
        {\fontsize{12}{14}\selectfont
        \textbf{Tahap I Ujian Kualifikasi}\par}
        
        \vspace{1.5cm}
        
        % NIM dan Nama
        {\fontsize{12}{14}\selectfont
        \textbf{\@myNIM}\par
        \textbf{\@myName}\par}
        
        \vspace{1.5cm}
        
        % Logo Universitas Telkom
        \IfFileExists{logo-telkom.png}{
            \includegraphics[width=0.35\textwidth]{logo-telkom.png}
        }{
            {\fontsize{16}{19}\bfseries Universitas Telkom\par}
        }
        
        \vspace{1.5cm}
        
        % Program Studi dan Informasi
        {\fontsize{16}{19}\selectfont
        \textbf{Program Studi Doktor Informatika}\par
        \textbf{Fakultas Informatika -- Universitas Telkom}\par
        \textbf{Bandung}\par
        \textbf{2026}\par}
        
    \end{titlepage}
    \newpage
}
\makeatother

% SOTA Table Environment
\newenvironment{sototable}
    {\begin{table}[htbp]
    \centering
    \caption{State-of-the-Art Penelitian}
    \label{tab:sota}}
    {\end{table}}

% Word Count Environments
\newenvironment{summary}
    {}
    {}

\newenvironment{background}
    {}
    {}

\newenvironment{literaturereview}
    {}
    {}

\newenvironment{researchgap}
    {}
    {}

\newenvironment{novelty}
    {}
    {}

% Bibliography Style - APA-like with BibTeX
\usepackage[
    backend=bibtex,   % Menggunakan BibTeX (biber tidak berfungsi di sistem ini)
    style=authoryear, % Author-year citation style (APA-like)
    sorting=nyt,      % Sort by name, year, title
    maxbibnames=99,   % Tampilkan semua nama penulis
    dashed=false,     % Jangan gunakan dash untuk author yang sama
]{biblatex}

\addbibresource{references.bib}

% Make \cite behave like \parencite (with parentheses)
\let\cite\parencite

% Custom citation formatting
\renewcommand*{\finalnamedelim}{\addspace\&\addspace}  % Ubah "and" jadi "&"
\renewcommand*{\nameyeardelim}{\addcomma\space}        % Tambahkan koma setelah author

% Fix spasi antara "In" dan judul italic
\renewbibmacro{in:}{%
  \printtext{\bibstring{in}\intitlepunct\addspace}}

% Custom format untuk memastikan ada spasi setelah "in"
\DeclareFieldFormat{booktitle}{\addspace\textit{#1}}
\DeclareFieldFormat{journaltitle}{\addspace\textit{#1}}

% Fix URL breaking untuk mencegah overflow
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}

% Set bibliography to use ragged right alignment untuk mencegah overfull
\emergencystretch=1em
\appto{\bibsetup}{\sloppy\RaggedRight}



% Set document metadata
\myTitle{Judul Disertasi Anda}
\myNIM{1234567890}
\myName{Nama Lengkap Anda}
\myYear{2026}

% Beginning of Document
\begin{document}

% Force TOC title to be uppercase (fix for babel override)
\renewcommand{\contentsname}{DAFTAR ISI}
\renewcommand{\listtablename}{DAFTAR TABEL}
\renewcommand{\listfigurename}{DAFTAR GAMBAR}

% Use Times New Roman as default font
\rmfamily

% Title Page
\maketitle

% Halaman Depan menggunakan angka Romawi
\pagenumbering{roman}

% DAFTAR ISI
\addcontentsline{toc}{section}{DAFTAR ISI}
\tableofcontents
\clearpage

% DAFTAR TABEL
\addcontentsline{toc}{section}{DAFTAR TABEL}
\listoftables
\clearpage

% DAFTAR GAMBAR
\addcontentsline{toc}{section}{DAFTAR GAMBAR}
\listoffigures
\clearpage

% DAFTAR RUMUS
\addcontentsline{toc}{section}{DAFTAR RUMUS}
\listofequations
\clearpage

% RINGKASAN
\section*{RINGKASAN}
\addcontentsline{toc}{section}{RINGKASAN}
\input{chapters/ringkasan}

\clearpage

% BAB 1 - PENDAHULUAN
\setcounter{section}{0}
\pagenumbering{arabic} % Kembali ke angka Arab mulai dari Bab 1
\setcounter{page}{1}   % Reset halaman ke 1
\section*{BAB 1 \\ PENDAHULUAN}
\addcontentsline{toc}{section}{BAB 1 PENDAHULUAN}
\refstepcounter{section}

\input{chapters/bab1}

\clearpage

% BAB 2 - LITERATURE REVIEW
\section*{BAB 2 \\ LITERATURE REVIEW}
\addcontentsline{toc}{section}{BAB 2 LITERATURE REVIEW}
\refstepcounter{section}

\input{chapters/bab2}

\clearpage

% BAB 3 - TEORI / METODE TERKAIT
\section*{BAB 3 \\ TEORI / METODE TERKAIT}
\addcontentsline{toc}{section}{BAB 3 TEORI / METODE TERKAIT}
\refstepcounter{section}

\input{chapters/bab3}

% DAFTAR PUSTAKA
\clearpage
\section*{DAFTAR PUSTAKA}
\addcontentsline{toc}{section}{DAFTAR PUSTAKA}

\printbibliography[heading=none]

\end{document}
